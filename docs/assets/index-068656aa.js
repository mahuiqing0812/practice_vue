import{h as G,i as k,P as J,m as K,K as H,R as Q,a1 as W,o as i,c as U,w as t,q as X,a as u,g as O,e,k as r,u as o,O as Z,b as y,F as w,d as T,J as M,l as ee,a2 as le,a3 as te,N as P,p as ae,f as oe,_ as de}from"./index-b1d7fe0a.js";const se=V=>(ae("data-v-2b4fe0de"),V=V(),oe(),V),ne={class:"card-header"},ue=se(()=>O("span",null,"就诊人管理",-1)),re={key:0,class:"visitors"},ie={key:1,class:"form"},ce=G({__name:"index",setup(V){let _=X(),z=ee(),b=k([]),p=k(0),C=k([]),a=J({name:"",certificatesType:"",certificatesNo:"",sex:0,birthdate:"",phone:"",isMarry:0,isInsure:0,addressSelected:[],address:"",contactsName:"",contactsCertificatesType:"",contactsCertificatesNo:"",contactsPhone:""});K(()=>{g(),R(),_.query.type=="add"&&(p.value=1),_.query.type=="edit"&&(p.value=1)});const g=async()=>{let n=await H();n.code==200&&(b.value=n.data)},A=()=>{q(),p.value=1},B=n=>{p.value=1,Object.assign(a,n)},q=()=>{Object.assign(a,{id:null,name:"",certificatesType:"",certificatesNo:"",sex:0,birthdate:"",phone:"",isMarry:0,isInsure:0,addressSelected:[],address:"",contactsName:"",contactsCertificatesType:"",contactsCertificatesNo:"",contactsPhone:""})},R=async()=>{let n=await Q();n.code==200&&(C.value=n.data)},Y={lazy:!0,async lazyLoad(n,d){let h=(await le(n.data.id||"86")).data.map(c=>({id:c.id,label:c.name,value:c.value,leaf:!c.hasChildren}));d(h)}},j=async()=>{try{await te(a),P({type:"success",message:a.id?"更新成功":"新增成功"}),_.query.type?z.back():p.value=0,g()}catch{P({type:"success",message:a.id?"更新失败":"新增失败"})}};W(()=>b.value,()=>{if(_.query.type=="edit"){let n=b.value.find(d=>d.id==_.query.id);Object.assign(a,n)}});const D=()=>{g()};return(n,d)=>{const v=u("el-button"),h=u("Visitor"),c=u("el-divider"),m=u("el-input"),s=u("el-form-item"),S=u("el-option"),I=u("el-select"),f=u("el-radio"),x=u("el-radio-group"),E=u("el-date-picker"),N=u("el-form"),F=u("el-cascader"),L=u("el-card");return i(),U(L,{class:"box-card"},{header:t(()=>[O("div",ne,[ue,e(v,{class:"button",type:"primary",icon:o(Z),onClick:A},{default:t(()=>[r("添加就诊人")]),_:1},8,["icon"])])]),default:t(()=>[o(p)==0?(i(),y("div",re,[(i(!0),y(w,null,T(o(b),(l,$)=>(i(),U(h,{onChangeScene:B,onRemoveUser:D,class:"item",key:l.id,user:l,index:$},null,8,["user","index"]))),128))])):M("",!0),o(p)==1?(i(),y("div",ie,[e(c,{"content-position":"left"},{default:t(()=>[r("就诊人信息")]),_:1}),e(N,{style:{width:"60%",margin:"10px auto"}},{default:t(()=>[e(s,{label:"用户姓名"},{default:t(()=>[e(m,{placeholder:"请你输入用户姓名",modelValue:o(a).name,"onUpdate:modelValue":d[0]||(d[0]=l=>o(a).name=l)},null,8,["modelValue"])]),_:1}),e(s,{label:"证件类型"},{default:t(()=>[e(I,{placeholder:"请你选择证件的类型",style:{width:"100%"},modelValue:o(a).certificatesType,"onUpdate:modelValue":d[1]||(d[1]=l=>o(a).certificatesType=l)},{default:t(()=>[(i(!0),y(w,null,T(o(C),l=>(i(),U(S,{key:l.id,label:l.name,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"证件号码"},{default:t(()=>[e(m,{placeholder:"请你输入证件号码",modelValue:o(a).certificatesNo,"onUpdate:modelValue":d[2]||(d[2]=l=>o(a).certificatesNo=l)},null,8,["modelValue"])]),_:1}),e(s,{label:"用户性别"},{default:t(()=>[e(x,{modelValue:o(a).sex,"onUpdate:modelValue":d[3]||(d[3]=l=>o(a).sex=l)},{default:t(()=>[e(f,{label:1},{default:t(()=>[r("男")]),_:1}),e(f,{label:0},{default:t(()=>[r("女")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"出生日期"},{default:t(()=>[e(E,{modelValue:o(a).birthdate,"onUpdate:modelValue":d[4]||(d[4]=l=>o(a).birthdate=l),"value-format":"YYYY-MM-DD",type:"date",placeholder:"请你选择日期"},null,8,["modelValue"])]),_:1}),e(s,{label:"手机号码"},{default:t(()=>[e(m,{placeholder:"请你输入用户手机号码",modelValue:o(a).phone,"onUpdate:modelValue":d[5]||(d[5]=l=>o(a).phone=l)},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{"content-position":"left"},{default:t(()=>[r("建档信息（完善后部分医院首次就诊不排队建档）")]),_:1}),e(N,{style:{width:"60%",margin:"10px auto"}},{default:t(()=>[e(s,{label:"婚姻状况"},{default:t(()=>[e(x,{modelValue:o(a).isMarry,"onUpdate:modelValue":d[6]||(d[6]=l=>o(a).isMarry=l)},{default:t(()=>[e(f,{label:1},{default:t(()=>[r("已婚")]),_:1}),e(f,{label:0},{default:t(()=>[r("未婚")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"自费/医保"},{default:t(()=>[e(x,{modelValue:o(a).isInsure,"onUpdate:modelValue":d[7]||(d[7]=l=>o(a).isInsure=l)},{default:t(()=>[e(f,{label:1},{default:t(()=>[r("自费")]),_:1}),e(f,{label:0},{default:t(()=>[r("医保")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"当前的住址"},{default:t(()=>[e(F,{props:Y,modelValue:o(a).addressSelected,"onUpdate:modelValue":d[8]||(d[8]=l=>o(a).addressSelected=l)},null,8,["modelValue"])]),_:1}),e(s,{label:"详细地址"},{default:t(()=>[e(m,{placeholder:"请你输入用户详细地址",modelValue:o(a).address,"onUpdate:modelValue":d[9]||(d[9]=l=>o(a).address=l)},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{"content-position":"left"},{default:t(()=>[r("联系人信息（选填）")]),_:1}),e(N,{style:{width:"60%",margin:"10px auto"},"label-width":"80"},{default:t(()=>[e(s,{label:"用户姓名"},{default:t(()=>[e(m,{placeholder:"请你输入用户姓名",modelValue:o(a).contactsName,"onUpdate:modelValue":d[10]||(d[10]=l=>o(a).contactsName=l)},null,8,["modelValue"])]),_:1}),e(s,{label:"证件类型"},{default:t(()=>[e(I,{placeholder:"请你选择证件的类型",style:{width:"100%"},modelValue:o(a).contactsCertificatesType,"onUpdate:modelValue":d[11]||(d[11]=l=>o(a).contactsCertificatesType=l)},{default:t(()=>[(i(!0),y(w,null,T(o(C),l=>(i(),U(S,{key:l.id,label:l.name,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"证件号码"},{default:t(()=>[e(m,{placeholder:"请你输入证件号码",modelValue:o(a).contactsCertificatesNo,"onUpdate:modelValue":d[12]||(d[12]=l=>o(a).contactsCertificatesNo=l)},null,8,["modelValue"])]),_:1}),e(s,{label:"手机号码"},{default:t(()=>[e(m,{placeholder:"请你输入用户手机号码",modelValue:o(a).contactsPhone,"onUpdate:modelValue":d[13]||(d[13]=l=>o(a).contactsPhone=l)},null,8,["modelValue"])]),_:1}),e(s,null,{default:t(()=>[e(v,{type:"primary",size:"default",onClick:j},{default:t(()=>[r("提交")]),_:1}),e(v,{type:"primary",size:"default",onClick:q},{default:t(()=>[r("重写")]),_:1})]),_:1})]),_:1})])):M("",!0)]),_:1})}}});const me=de(ce,[["__scopeId","data-v-2b4fe0de"]]);export{me as default};
