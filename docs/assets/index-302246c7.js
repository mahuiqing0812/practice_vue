import{h as O,i as y,P as Q,m as G,Q as K,R as W,o as p,c as g,w as e,a as i,g as c,e as a,u as l,A as X,k as _,t as U,J as V,b as E,d as Y,F as Z,j as ee,N as F,T as te,p as ae,f as le,_ as oe}from"./index-b1d7fe0a.js";const se="/practice_vue/assets/auth_example-9b25c4a0.png",v=h=>(ae("data-v-44ef70ad"),h=h(),le(),h),re=v(()=>c("div",{class:"card-header"},[c("h1",null,"实名信息")],-1)),ie={class:"tip",style:{color:"#7f7f7f"}},ne=v(()=>c("div",{class:"cell-item"},"用户姓名",-1)),ce=v(()=>c("div",{class:"cell-item"},"证件类型",-1)),de=v(()=>c("div",{class:"cell-item"},"证件号码",-1)),ue=v(()=>c("img",{style:{width:"100%",height:"100%"},src:se,alt:""},null,-1)),pe=["src"],_e=O({__name:"index",setup(h){let b=y(),x=y(),d=y({}),N=y([]),f=y(!1),o=Q({certificatesNo:"",certificatesType:"",certificatesUrl:"",name:""});G(()=>{T(),I()});const T=async()=>{let s=await K();s.code==200&&(d.value=s.data)},I=async()=>{let s=await W();s.code==200&&(N.value=s.data)},q=()=>{F({type:"error",message:"图片只能上传一张图片"})},D=s=>{b.value.clearValidate("certificatesUrl"),o.certificatesUrl=s.data},S=()=>{f.value=!0},z=()=>{o.certificatesUrl=""},P=()=>{x.value.clearFiles(),Object.assign(o,{certificatesNo:"",certificatesType:"",certificatesUrl:"",name:""})},A=async()=>{await b.value.validate();try{await te(o),F({type:"success",message:"认证成功"}),T()}catch{F({type:"error",message:"认证失败"})}},R={name:[{required:!0,validator:(s,t,r)=>{/^[\u00B7\u3007\u3400-\u4DBF\u4E00-\u9FFF\uE000-\uF8FF\uD840-\uD8C0\uDC00-\uDFFF\uF900-\uFAFF]+$/.test(t)?r():r(new Error("请输入正确中国人的名字"))}}],certificatesType:[{required:!0,validator:(s,t,r)=>{t=="10"||t=="20"?r():r(new Error("请选择证件的类型"))}}],certificatesNo:[{required:!0,validator:(s,t,r)=>{let u=/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{4}$/,w=/^\d{9}$/;u.test(t)||w.test(t)?r():r(new Error("请输入正确的身份证或者户口本的号码"))}}],certificatesUrl:[{required:!0,validator:(s,t,r)=>{t.length?r():r(new Error("请上传证件照图片"))}}]};return(s,t)=>{const r=i("el-icon"),u=i("el-descriptions-item"),w=i("el-descriptions"),C=i("el-input"),m=i("el-form-item"),j=i("el-option"),B=i("el-select"),M=i("el-upload"),$=i("el-dialog"),k=i("el-button"),H=i("el-form"),J=i("el-card");return p(),g(J,{class:"box-card"},{header:e(()=>[re]),default:e(()=>[c("div",ie,[c("p",null,[a(r,null,{default:e(()=>[a(l(X))]),_:1}),_("完成实名认证后才能添加就诊人，正常进行挂号，为了不影响后续步骤，建议提前实名认证。 ")])]),l(d).authStatus==1?(p(),g(w,{key:0,size:"small",class:"margin-top",column:1,border:"",style:{margin:"20px auto"}},{default:e(()=>[a(u,{"label-align":"center",width:20},{label:e(()=>[ne]),default:e(()=>[_(" "+U(l(d).name),1)]),_:1}),a(u,{"label-align":"center",width:20},{label:e(()=>[ce]),default:e(()=>[_(" "+U(l(d).certificatesType=="10"?"身份证":"户口本"),1)]),_:1}),a(u,{"label-align":"center",width:"20px"},{label:e(()=>[de]),default:e(()=>[_(" "+U(l(d).certificatesNo),1)]),_:1})]),_:1})):V("",!0),l(d).authStatus==0?(p(),g(H,{key:1,style:{width:"60%",margin:"20px auto"},"label-width":"80",model:l(o),rules:R,ref_key:"form",ref:b},{default:e(()=>[a(m,{label:"用户姓名",prop:"name"},{default:e(()=>[a(C,{placeholder:"请输入用户姓名",modelValue:l(o).name,"onUpdate:modelValue":t[0]||(t[0]=n=>l(o).name=n)},null,8,["modelValue"])]),_:1}),a(m,{label:"证件类型",prop:"certificatesType"},{default:e(()=>[a(B,{style:{width:"100%"},placeholder:"请选择证件类型",modelValue:l(o).certificatesType,"onUpdate:modelValue":t[1]||(t[1]=n=>l(o).certificatesType=n)},{default:e(()=>[(p(!0),E(Z,null,Y(l(N),(n,L)=>(p(),g(j,{label:n.name,value:n.value,key:L},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(m,{label:"证件号码",prop:"certificatesNo"},{default:e(()=>[a(C,{placeholder:"请输入证件号码",modelValue:l(o).certificatesNo,"onUpdate:modelValue":t[2]||(t[2]=n=>l(o).certificatesNo=n)},null,8,["modelValue"])]),_:1}),a(m,{label:"上传证件",prop:"certificatesUrl"},{default:e(()=>[a(M,{ref_key:"upload",ref:x,"list-type":"picture-card","on-remove":z,"on-preview":S,"on-success":D,"on-exceed":q,limit:1,action:"/api/oss/file/fileUpload?fileHost=userAuah"},{default:e(()=>[ue]),_:1},512),a($,{modelValue:l(f),"onUpdate:modelValue":t[3]||(t[3]=n=>ee(f)?f.value=n:f=n)},{default:e(()=>[l(o).certificatesUrl?(p(),E("img",{key:0,"w-full":"",style:{width:"100%",height:"100%"},src:l(o).certificatesUrl,alt:"Preview Image"},null,8,pe)):V("",!0)]),_:1},8,["modelValue"])]),_:1}),a(m,null,{default:e(()=>[a(k,{type:"primary",size:"default",onClick:A},{default:e(()=>[_("提交")]),_:1}),a(k,{type:"primary",size:"default",onClick:P},{default:e(()=>[_("重写")]),_:1})]),_:1})]),_:1},8,["model"])):V("",!0)]),_:1})}}});const ge=oe(_e,[["__scopeId","data-v-44ef70ad"]]);export{ge as default};
